{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState, useReducer, useEffect } from \"react\";\nimport { fetchAPI, submitAPI } from \"../APIs/apiMockup\";\n//import { useFormContext } from \"../store/FormContext\";\n\nconst initialState = {\n  name: \"\",\n  email: \"\",\n  date: \"\",\n  time: \"\",\n  numberOfGuests: 1,\n  occasion: \"\"\n};\nconst ACTION_TYPES = {\n  NAME: 0,\n  EMAIL: 1,\n  DATE: 2,\n  TIME: 3,\n  GUESTS: 4,\n  OCCASION: 6\n};\nfunction formReducer(state, action) {\n  switch (action.type) {\n    case ACTION_TYPES.NAME:\n      return {\n        ...state,\n        name: action.payload\n      };\n    case ACTION_TYPES.DATE:\n      return {\n        ...state,\n        date: action.payload\n      };\n    case ACTION_TYPES.TIME:\n      return {\n        ...state,\n        time: action.payload\n      };\n    case ACTION_TYPES.GUESTS:\n      return {\n        ...state,\n        numberOfGuests: action.payload\n      };\n    case ACTION_TYPES.OCCASION:\n      return {\n        ...state,\n        occasion: action.payload\n      };\n    default:\n      return state;\n  }\n}\nconst useForm = () => {\n  _s();\n  const [form, dispatch] = useReducer(formReducer, initialState);\n  const [timeSlots, setTimeslots] = useState([\"17:00\"]);\n  const [isFormValid, setFormValid] = useState(false);\n  const formContext = useFormContext();\n  useEffect(() => {\n    if (form.name.trim().length >= 3 && form.date && form.time && form.numberOfGuests && form.occasion) {\n      setFormValid(true);\n    }\n  }, [form]);\n  const changeNameHandler = e => {\n    dispatch({\n      type: ACTION_TYPES.NAME,\n      payload: e.target.value\n    });\n  };\n  const changeDateHandler = e => {\n    dispatch({\n      type: ACTION_TYPES.DATE,\n      payload: e.target.value\n    });\n    setTimeslots(fetchAPI(new Date(e.target.value)));\n  };\n  const changeTimeHandler = e => {\n    dispatch({\n      type: ACTION_TYPES.TIME,\n      payload: e.target.value\n    });\n  };\n  const changeGuestsHandler = e => {\n    dispatch({\n      type: ACTION_TYPES.GUESTS,\n      payload: e.target.value\n    });\n  };\n  const changeOccasionHandler = e => {\n    dispatch({\n      type: ACTION_TYPES.OCCASION,\n      payload: e.target.value\n    });\n  };\n  const submitHandler = e => {\n    e.preventDefault();\n    let response;\n    if (isFormValid) {\n      response = submitAPI(form);\n      formContext.setForm(form);\n    }\n    return response ? true : false;\n  };\n  return {\n    form,\n    timeSlots,\n    isFormValid,\n    changeNameHandler,\n    changeDateHandler,\n    changeTimeHandler,\n    changeGuestsHandler,\n    changeOccasionHandler,\n    submitHandler\n  };\n};\n_s(useForm, \"huuFOnl1nJyLruDxgpG3F8T5id4=\", true);\nexport default useForm;","map":{"version":3,"names":["useState","useReducer","useEffect","fetchAPI","submitAPI","initialState","name","email","date","time","numberOfGuests","occasion","ACTION_TYPES","NAME","EMAIL","DATE","TIME","GUESTS","OCCASION","formReducer","state","action","type","payload","useForm","_s","form","dispatch","timeSlots","setTimeslots","isFormValid","setFormValid","formContext","useFormContext","trim","length","changeNameHandler","e","target","value","changeDateHandler","Date","changeTimeHandler","changeGuestsHandler","changeOccasionHandler","submitHandler","preventDefault","response","setForm"],"sources":["/Users/otmp/Documents/GitHub/Little-lemon/Coursera-Project/src/hooks/useForm.js"],"sourcesContent":["import { useState, useReducer, useEffect } from \"react\";\nimport { fetchAPI, submitAPI } from \"../APIs/apiMockup\";\n//import { useFormContext } from \"../store/FormContext\";\n\nconst initialState = {\n  name: \"\",\n  email: \"\",\n  date: \"\",\n  time: \"\",\n  numberOfGuests: 1,\n  occasion: \"\",\n};\n\nconst ACTION_TYPES = {\n  NAME: 0,\n  EMAIL: 1,\n  DATE: 2,\n  TIME: 3,\n  GUESTS: 4,\n  OCCASION: 6,\n};\n\nfunction formReducer(state, action) {\n  switch (action.type) {\n    case ACTION_TYPES.NAME:\n      return {\n        ...state,\n        name: action.payload,\n      };\n    case ACTION_TYPES.DATE:\n      return {\n        ...state,\n        date: action.payload,\n      };\n    case ACTION_TYPES.TIME:\n      return {\n        ...state,\n        time: action.payload,\n      };\n    case ACTION_TYPES.GUESTS:\n      return {\n        ...state,\n        numberOfGuests: action.payload,\n      };\n    case ACTION_TYPES.OCCASION:\n      return {\n        ...state,\n        occasion: action.payload,\n      };\n    default:\n      return state;\n  }\n}\n\nconst useForm = () => {\n  const [form, dispatch] = useReducer(formReducer, initialState);\n  const [timeSlots, setTimeslots] = useState([\"17:00\"]);\n  const [isFormValid, setFormValid] = useState(false);\n  const formContext = useFormContext();\n\n  useEffect(() => {\n    if (\n      form.name.trim().length >= 3 &&\n      form.date &&\n      form.time &&\n      form.numberOfGuests &&\n      form.occasion\n    ) {\n      setFormValid(true);\n    }\n  }, [form]);\n\n  const changeNameHandler = (e) => {\n    dispatch({ type: ACTION_TYPES.NAME, payload: e.target.value });\n  };\n\n  const changeDateHandler = (e) => {\n    dispatch({ type: ACTION_TYPES.DATE, payload: e.target.value });\n    setTimeslots(fetchAPI(new Date(e.target.value)));\n  };\n\n  const changeTimeHandler = (e) => {\n    dispatch({ type: ACTION_TYPES.TIME, payload: e.target.value });\n  };\n\n  const changeGuestsHandler = (e) => {\n    dispatch({ type: ACTION_TYPES.GUESTS, payload: e.target.value });\n  };\n\n  const changeOccasionHandler = (e) => {\n    dispatch({ type: ACTION_TYPES.OCCASION, payload: e.target.value });\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    let response;\n\n    if (isFormValid) {\n      response = submitAPI(form);\n      formContext.setForm(form);\n    }\n    return response ? true : false;\n  };\n\n  return {\n    form,\n    timeSlots,\n    isFormValid,\n    changeNameHandler,\n    changeDateHandler,\n    changeTimeHandler,\n    changeGuestsHandler,\n    changeOccasionHandler,\n    submitHandler,\n  };\n};\n\nexport default useForm;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}